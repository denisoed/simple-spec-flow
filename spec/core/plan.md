<!-- spec-feature: план реализации -->

Заготовка помогает оформить план реализации фичи в процессе **spec-feature**.

**Параметры**

- **FEATURE** — название папки, в которой будет сохранён план. Берётся из значения между первыми двумя символами `@` (например, `@payments@` → `payments`).
- **CONTEXT** — основной контекст для подготовки плана. Считай всем содержимым после второго `@` в строке параметров; контекст может занимать несколько строк и включать дополнительные пояснения.

**Общие правила**

- Работай только с файлами спецификаций: не создавай код и новые каталоги.
- Используй `spec/core/spec.md` как источник спецификации, на основе которой формируется план.
- Используй `spec/features/{FEATURE}/spec.md` как дополнительный контекст. Если файл недоступен, продолжай работу, опираясь на **CONTEXT**.
- Подставляй конкретные значения вместо заглушек (`{FEATURE}`, `{CONTEXT}` и т.п.). Если раздел не применим — явно напиши `Не требуется — причина: <пояснение>`.
- Формируй содержательные абзацы или списки: не оставляй пустых заголовков, комментариев-подсказок и маркеров `...`.
- Придерживайся базовых принципов разработки ПО: KISS, DRY и YAGNI, чтобы решения оставались простыми, без дублирования и лишней логики.
- По завершении заполнения разделов отметь чекбоксы в блоке «Контроль выполнения инструкций».

**Что требуется раскрыть в плане**

- `## Источники данных / схемы` — хранилища, миграции, индексы, работа с данными и внешними источниками.
- `## Контракты и интерфейсы` — публичные API, события, очереди, UI/CLI, форматы ошибок и ожидания по валидации.
- `## Архитектура / Компоненты` — сервисы, модули, интеграции, ограничения и выбранный стек (БД, API, UI, очереди, фоновые процессы и т.д.).
- `## Риски` — потенциальные проблемы и способы смягчения.
- `## Допущения` — явные предположения и недостающие сведения.

**Шаги**

1. Начни результат с комментария для указания пути сохранения:
   ```md
   <!-- SAVE_AS: spec/features/{FEATURE}/plan.md -->
   ```
2. Сформируй план по разделам выше, опираясь на **CONTEXT** и доступный дополнительный контекст. Для каждого раздела фиксируй, что именно нужно сделать, а не только перечисляй компоненты.
3. Проверь, что в документе нет незаполненных заглушек и что вывод оформлен валидным Markdown.
4. Добавь в конец документа раздел «## Контроль выполнения инструкций» из шаблона ниже и проставь `[x]` в каждом пункте, если требование выполнено.

**Шаблон результата**

```md
# План реализации

**План:** {CONTEXT}

## Источники данных / схемы

## Контракты и интерфейсы

## Архитектура / Компоненты

## Риски

## Допущения

## Контроль выполнения инструкций

- [ ] Все разделы заполнены конкретными действиями или пометкой «Не требуется — причина».
- [ ] План учитывает спецификацию и исходный контекст.
- [ ] Документ готов к сохранению и соответствует Markdown.
```

Пиши строго в Markdown и не добавляй ничего вне документа. **Цель** — сохранить файл `/spec/features/{FEATURE}/plan.md` с описанием того, КАК реализуем фичу на основе **CONTEXT**.