# SpecFeature

SpecFeature is a sequential process for preparing and maintaining features: from formulating business context to verifying completed tasks. It helps synchronize product, engineering, and QA teams, reduce the number of "on-the-fly" changes, and establish success criteria before development begins. All artifacts are generated by LLM based on a single input context.

## Directory structure `/spec`

### Initial structure (created during initialization)
```
/spec
├── README.md             ← this guide
├── feature.md            ← main template that launches spec-feature
└── core                  ← base templates for specific stages
    ├── spec.md           ← specification structure
    ├── plan.md           ← technical plan structure
    ├── tasks.md          ← task list structure
    ├── verify.md         ← verification report structure
    └── hotfix.md         ← hotfix and artifact update structure
```

### Full structure (after creating the first feature)
```
/spec
├── README.md             ← this guide
├── feature.md            ← main template that launches spec-feature
├── core                  ← base templates for specific stages
│   ├── spec.md           ← specification structure
│   ├── plan.md           ← technical plan structure
│   ├── tasks.md          ← task list structure
│   ├── verify.md         ← verification report structure
│   └── hotfix.md         ← hotfix and artifact update structure
└── features              ← directory with feature materials (created automatically)
    ├── <feature>         ← specific feature folder (e.g., `user-auth`)
    │   ├── spec.md       ← current specification
    │   ├── plan.md       ← technical plan
    │   ├── tasks.md      ← implementation checklist
    │   └── verify-report.md (optional) — verification log
    └── ...               ← other features created from templates
```

> **Note:** The `features` folder is created automatically when creating the first feature through `spec/feature.md`.

## Getting started

To launch specification creation, use `spec/feature.md`. It will create a specification, plan, and task list in one request.

**Usage example:**
```
Use the template from spec/feature.md.
@user-auth@ Need to add user authentication via email and password. The user should be able to register, log in, and recover their password. Integration with the existing notification system is mandatory.
```

This will create the `spec/features/user-auth/` folder with three files: `spec.md`, `plan.md`, and `tasks.md`.

## Input parameter format

Pass parameters in one line in the format `@<feature>@ <context>`:

- the value between the first two `@` symbols is used as **FEATURE** and determines the feature folder (`@payments@` → `spec/features/payments`);
- everything following the second `@` is **CONTEXT**. It can span multiple lines, include lists, links, and additional clarifications.

## How to launch specification creation

Use any AI Assistant that can create folders and files, such as: `Claude Code`, `Gemini CLI`, `Codex CLI`, `Copilot`, `Cursor`, etc.

1. **Pass it a prompt in this format**
   ```
   Use the template from spec/feature.md.
   @<feature>@ <context>
   ```
2. **What happens next**
   The AI assistant generates three Markdown documents in sequence:
   - `spec/features/{FEATURE}/spec.md` — specification describing value and user scenarios.
   - `spec/features/{FEATURE}/plan.md` — technical plan based on specification and context.
   - `spec/features/{FEATURE}/tasks.md` — checklist of tasks for implementation and testing.

## How to launch task execution based on created specifications

After creating the specification and plan, you can proceed with implementation:

1. **Launch task execution**
   ```
   Execute all tasks in `spec/features/{FEATURE}/tasks.md`
   ```

2. **What happens during execution**
   - AI assistant sequentially executes tasks from the checklist
   - Each completed task is marked as finished
   - When problems arise, the assistant may request clarifications
   - Progress can be tracked by updating checkboxes in `tasks.md`

3. **Example for user-auth feature**
   ```
   Execute all tasks in `spec/features/user-auth/tasks.md`
   ```

## What happens after task execution

After completing all tasks, automatic verification is launched:

1. **Automatic verification**
   - AI assistant uses the `spec/core/verify.md` template
   - Compares implemented functionality with requirements from `spec.md`
   - Checks compliance with the technical plan from `plan.md`

2. **Verification results**
   - A report `spec/features/{FEATURE}/verify-report.md` is created
   - Task statuses in `tasks.md` are updated (✅ completed / ❌ requires refinement)
   - Found discrepancies and recommendations are recorded

3. **Verification report content**
   - Summary of completed tasks
   - List of found problems
   - Recommendations for fixes
   - Assessment of feature readiness for production

## Updating existing feature

To update an existing feature, reuse `spec/feature.md`, specifying the name of the required feature folder and a list of changes:

**Update example:**
```
Use the template from spec/feature.md.
@user-auth@ Add two-factor authentication (2FA) via SMS. The user should be able to enable/disable 2FA in profile settings. Integration with existing SMS provider.
```

The AI assistant will correctly overwrite `spec.md`, `plan.md`, and `tasks.md`, preserving the structure and updating the content for new requirements.

## Troubleshooting

### Common problems and solutions

**Problem:** AI assistant doesn't create feature folder
- **Solution:** Make sure you're using the correct format `@feature@ context` and that the assistant has file creation permissions

**Problem:** Tasks are executed in wrong order
- **Solution:** Check task numbering in `tasks.md` and reorder if necessary

**Problem:** Verification doesn't launch automatically
- **Solution:** Make sure all tasks in `tasks.md` are marked as completed, then manually launch verification:
  ```
  Use the template from spec/core/verify.md to verify spec/features/{FEATURE}/
  ```

**Problem:** Conflict when updating existing feature
- **Solution:** Create a backup of current files before updating or use git to track changes